"""
Account
"""
type Account {
  createdAt: ISO8601DateTime!
  data: String!
  devices: [Device!]!
  id: ID!
  pendingRequests: [Request!]!
  truentityId: String!
  updatedAt: ISO8601DateTime!
  user: User!
}

"""
Autogenerated return type of AccountLogin
"""
type AccountLoginPayload {
  accessToken: String!
  account: Account!
  refreshToken: String!
}

"""
Autogenerated return type of AccountSignup
"""
type AccountSignupPayload {
  accessToken: String!
  account: Account!
  refreshToken: String!
}

"""
Autogenerated return type of ApproveRequest
"""
type ApproveRequestPayload {
  request: Request!
}

"""
Autogenerated return type of CreateRequest
"""
type CreateRequestPayload {
  request: Request!
}

"""
Autogenerated return type of DenyRequest
"""
type DenyRequestPayload {
  request: Request!
}

"""
Device
"""
type Device {
  client: String!
  clientVersion: String!
  createdAt: ISO8601DateTime!
  expiresAt: NonNegativeInt!
  id: ID!
  ip: String
  lastIssued: String!
  lastIssuedAt: ISO8601DateTime!
  updatedAt: ISO8601DateTime!
  user: User!
  userAgent: String!
}

"""
A properly formatted email address
"""
scalar Email

"""
An ISO 8601-encoded datetime
"""
scalar ISO8601DateTime

enum LocaleEnum {
  US_ENGLISH
}

"""
The mutation root of this schema
"""
type Mutation {
  """
  Obtain access tokens with account credentials
  """
  accountLogin(email: Email!, fcmToken: String!, password: String!): AccountLoginPayload

  """
  Sign up a new account
  """
  accountSignup(email: Email!, fcmToken: String, firstName: String!, lastName: String!, password: String!): AccountSignupPayload

  """
  Approve a request
  """
  approveRequest(reply: String!, requestId: ID!): ApproveRequestPayload

  """
  Create new request
  """
  createRequest(purpose: String!, truentityId: String!): CreateRequestPayload

  """
  Deny a request
  """
  denyRequest(requestId: ID!): DenyRequestPayload

  """
  Get presigned upload url to S3
  """
  presignedUpload: PresignedUploadPayload

  """
  Obtain access tokens with relying party admin credentials
  """
  relyingPartyLogin(email: Email!, password: String!): RelyingPartyLoginPayload

  """
  Update stored account data
  """
  updateAccountData(accountId: ID!, data: String!): UpdateAccountDataPayload
}

"""
An Int with a value >= 0
"""
scalar NonNegativeInt

"""
Autogenerated return type of PresignedUpload
"""
type PresignedUploadPayload {
  key: String!
  url: String!
}

"""
The query root of this schema
"""
type Query {
  """
  Get current account
  """
  currentAccount: Account!

  """
  Get current relying party admin
  """
  currentRelyingPartyAdmin: RelyingPartyAdmin!

  """
  Get request
  """
  request(requestId: ID!): Request
}

"""
Relying party
"""
type RelyingParty {
  admins: [RelyingPartyAdmin!]!
  createdAt: ISO8601DateTime!
  id: ID!
  name: String!
  requests: [Request!]!
  updatedAt: ISO8601DateTime!
}

"""
Relying party admin
"""
type RelyingPartyAdmin {
  createdAt: ISO8601DateTime!
  devices: [Device!]!
  id: ID!
  relyingParty: RelyingParty!
  updatedAt: ISO8601DateTime!
}

"""
Autogenerated return type of RelyingPartyLogin
"""
type RelyingPartyLoginPayload {
  accessToken: String!
  refreshToken: String!
  relyingPartyAdmin: RelyingPartyAdmin!
}

"""
Request
"""
type Request {
  account: Account!
  body: String!
  createdAt: ISO8601DateTime!
  id: ID!
  relyingParty: RelyingParty!
  reply: String
  status: RequestStatusEnum!
  updatedAt: ISO8601DateTime!
}

enum RequestStatusEnum {
  APPROVED
  DENIED
  PENDING
}

"""
Autogenerated return type of UpdateAccountData
"""
type UpdateAccountDataPayload {
  account: Account!
}

"""
User
"""
type User {
  createdAt: ISO8601DateTime!
  devices: [Device!]!
  email: Email!
  firstName: String
  id: ID!
  lastName: String
  locale: LocaleEnum!
  passwordStale: Boolean
  updatedAt: ISO8601DateTime!
}
